NoSQL，Not Only SQL指的是非关系型的数据库,是对不同于传统的关系型数据库的数据库管理系统的统称。

NoSQL用于超大规模数据的存储。这些类型的数据存储不需要固定的模式，无需多余操作就可以横向扩展

常见的NoSQL数据库：临时性键值存储（Memcached,Redis,DynamoDB），永久性键值存储（Tokyo Tyrant,Flare,ROMA,Redis），面向文档的数据库（MangoDB,CouchDB），面向行的数据库（Cassandra）面向列的数据库（HBase,HyperTable） ,图数据库（Neo4j）



什么时候应该使用NoSQL数据库：

- **需要能够存储不同的数据类型格式**：还创建了NoSQL来处理不同的数据配置：结构化，半结构化和非结构化数据。JSON，XML文档都可以使用NoSQL轻松处理。
- **大量数据**：关系数据库不是分布式数据库，因此，它们只能通过在计算机本身中添加更多存储来垂直扩展。创建NoSQL数据库是为了能够水平扩展。您添加到数据库中的服务器/系统越多，可以承载的数据就越多，它们具有高可用性和低延迟（快速读写）。
- **需要水平可伸缩性**：水平可伸缩性是向系统添加更多机器或节点以增加性能和数据空间的能力
- **需要高吞吐量**：ACID事务带来好处的同时，它们也会减慢读取和写入数据的过程。如果您需要使用关系数据库进行非常快速的读写，则可能不适合您的需求。
- **需要灵活的架构**：灵活的架构可以允许添加不必每行都使用的列，从而节省磁盘空间。
- **需要高可用性**：关系数据库具有单点故障。当该数据库发生故障时，必须进行到备份系统的故障转移并且需要时间。

NoSQL（尤其是Apache Cassandra）的良好用例是：

1. 交易记录（零售，医疗保健）
2. 物联网（IoT）
3. 时间序列数据
4. 任何繁重的工作量都写入数据库（因为Apache Cassandra已针对写入进行了优化）

什么时候不使用NoSQL数据库？

- **当您有一个小型数据集时**：NoSQL数据库是为大型数据集而不是小型数据集创建的，虽然它不是为此创建的。
- **当您需要ACID事务时**：如果您需要一个具有ACID事务的一致数据库，那么大多数NoSQL数据库将无法满足此需求。NoSQL数据库最终是一致的，并且不提供ACID事务。但是，也有例外。一些非关系型数据库（例如MongoDB）可以支持ACID事务。
- **当您需要跨表执行JOINS的能力时**：NoSQL不允许执行JOINS的能力。不允许这样做，因为这将导致全表扫描。
- **如果您希望能够进行汇总和分析**
- **如果您有不断变化的业务需求**：可以进行临时查询，但是很难完成，因为完成了数据模型以修复特定查询
- **如果您的查询不可用并且需要灵活性**：您需要事先查询。如果这些数据不可用，或者您将需要能够灵活地查询数据，则可能需要使用关系数据库

从v4.0开始，MongoDB在单个副本集中添加了多文档ACID事务。在更高版本的v4.2中，他们在分片/分区部署中添加了多文档ACID事务

https://blog.csdn.net/qq_30764991/article/details/81564787



### CAP定理：

- **一致性**：从数据库中读取的每个数据都会获取最新（且正确）的数据或错误
- **可用性**：收到每个请求并给出响应-不能保证数据是最新更新
- **分区容限**：无论节点之间是否失去网络连接，系统都可以继续工作

### Apache Cassandra中的数据建模：

- 非正规化不仅可行-这是必须的
- 必须进行非规范化才能快速读取
- Apache Cassandra已针对快速写入进行了优化
- 总是先考虑查询
- 每个查询一张表是一个不错的策略
- Apache的卡桑德拉也**不会**允许表之间的联接